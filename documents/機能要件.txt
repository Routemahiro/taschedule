# 機能要件定義書

## 1. システム概要
VSCode拡張機能として、Googleカレンダーの予定を定期的に取得し、AIと連携しやすい形式でローカルファイルとして保存・管理するシステムです。

## 2. 主要機能一覧
### 2.1 カレンダー情報取得機能
- [ ] Google Calendar APIを使用した予定取得
  - 詳細説明：指定されたカレンダーIDから予定情報を取得
  - 入力項目：カレンダーID、取得期間
  - 処理内容：APIを使用して予定情報を取得
  - 出力：取得した予定情報

- [ ] 定期的な自動更新
  - 詳細説明：設定された間隔で予定情報を更新
  - 入力項目：更新間隔（分単位）
  - 処理内容：定期的にAPI呼び出しを実行
  - 出力：更新された予定情報

### 2.2 ファイル管理機能
- [ ] YAML形式でのファイル保存
  - 詳細説明：カレンダーごとのディレクトリに日付単位でYAMLファイルを作成・更新
  - 入力項目：予定情報
  - 処理内容：YAML形式に変換してファイル保存
  - 出力：YAMLファイル
  - ファイルパス形式：googlecalendar/{カレンダー名}/yyyymmdd.yml

- [ ] 古いファイルの自動削除
  - 詳細説明：設定された期間を超えたファイルを削除
  - 入力項目：保持期間設定
  - 処理内容：VSCode起動時にファイル確認・削除
  - 出力：クリーンアップログ

### 2.3 設定管理機能
- [ ] 拡張機能設定の管理
  - 詳細説明：VSCode設定画面での各種設定
  - 入力項目：
    - カレンダー設定
      - カレンダーID
      - カレンダー表示名
    - 更新間隔
    - 保存先ディレクトリ
    - データ保持期間
    - タイムゾーン
    - エラー再試行設定
  - 処理内容：設定値の保存と読み込み
  - 出力：設定情報の反映

### 2.4 複数カレンダー管理機能
- [ ] 複数カレンダーの並列取得
  - 詳細説明：設定された全カレンダーの情報を並列で取得
  - 入力項目：カレンダーID一覧とその表示名
  - 処理内容：各カレンダーの情報を並列で取得
  - 出力：カレンダーごとの予定情報

## 3. ユーザー種別と権限
- 一般ユーザー
  - 許可機能：全機能利用可能
  - 制限事項：なし

## 4. データ要件
### 4.1 管理対象データ
- 予定情報
  - タイトル：文字列
  - 開始時間：ISO 8601形式
  - 終了時間：ISO 8601形式
  - 場所：文字列
  - 備考：文字列

### 4.2 設定情報
- カレンダー設定：オブジェクト配列
  - カレンダーID：文字列
  - カレンダー表示名：文字列
- 更新間隔：数値（分）
- 保存先：パス文字列
- 保持期間：数値（月）
- タイムゾーン：文字列
- 再試行回数：数値
- 再試行間隔：数値（分）

## 5. 外部システム連携
- Google Calendar API
  - 連携内容：予定情報の取得
  - データフロー：API呼び出し → データ取得 → YAML保存 