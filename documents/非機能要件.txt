# 非機能要件定義書

## 1. パフォーマンス要件
### 1.1 応答時間
- カレンダー情報取得：5秒以内
- ファイル保存処理：2秒以内
- 設定変更反映：1秒以内

### 1.2 同時処理
- 複数カレンダーの同時取得：並列処理で対応
- ファイル書き込み：排他制御必要

## 2. セキュリティ要件
### 2.1 認証情報の保護
- Google OAuth認証情報の安全な保存
  - VSCodeの暗号化ストレージを使用
  - 設定ファイルには暗号化された形式で保存
  - メモリ上での最小限の保持

### 2.2 アクセス制御
- Google Calendar APIへのアクセス
  - 必要最小限の権限スコープのみ要求
  - read-only権限での動作を基本とする
  - トークンの定期的な更新

### 2.3 データ保護
- ローカルファイルのセキュリティ
  - ユーザーのワークスペース内のみにファイルを保存
  - 機密情報を含まないYAML形式での保存
  - 古いファイルの確実な削除

### 2.4 通信セキュリティ
- HTTPS通信の強制
- 証明書の検証
- API通信時のタイムアウト設定

### 2.5 エラー処理
- 認証情報のログ出力制限
  - 認証関連の機密情報はマスク処理を行う
- ユーザーフレンドリーなエラーメッセージ
  - API接続エラー時の具体的な対処方法の提示
  - 設定エラー時のガイダンス表示
  - 認証エラー時の手順案内

### 2.6 トークン管理
- リフレッシュトークンのローテーション
  - 定期的な更新（30日ごと）
  - 失効検知時の再認証フロー
  - バックグラウンド更新処理

### 2.7 データ暗号化
- 認証情報の暗号化保存
  - VSCode Secret Storage API使用
  - AES-256-GCMによる暗号化
  - 環境変数との連携

## 3. 可用性要件
- サービス提供時間：VSCode起動中は常時動作
- 自動リトライ機能：
  - 最大3回
  - 1分間隔
- エラー時のグレースフル・デグラデーション

## 4. ユーザビリティ要件
- VSCode標準の設定インターフェース利用
- エラー時の適切なメッセージ表示
- 最小限の設定で利用開始可能

## 5. 運用保守要件
### 5.1 監視要件
- エラーログの出力
  - API呼び出しエラー
  - ファイル操作エラー
  - 設定読み込みエラー
- API呼び出し状況の記録
- ファイル操作の記録

### 5.2 バックアップ要件
- ユーザーによるバックアップ不要
- 設定情報のVSCode同期機能による保持

### 5.3 障害対策
- API接続エラー時：ログ出力のみ
- ファイル書き込みエラー時：ログ出力のみ
- 設定ファイル破損時：デフォルト値利用 